services:
  # Backend API Service
  - type: web
    name: grm-robotics-backend
    env: node
    plan: free
    buildCommand: cd backend && npm install && npm run build && npm run prisma:generate
    startCommand: cd backend && npm start
    envVars:
      - key: DATABASE_URL
        value: postgresql://neondb_owner:npg_8JpeoAblRS4W@ep-twilight-resonance-a1sqm9xo-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
      - key: JWT_SECRET
        value: a37e6d68ad1f5ce687ff47d401cec461ac218e5eca9feefcbca8607a548bdb3b79a74a9cd4fdbabcb7e17f13ec1b93892ebb32020af5b51c5c6e45d000e8b261
      - key: JWT_EXPIRES_IN
        value: 365d
      - key: REFRESH_TOKEN_SECRET
        value: cb5dfe0e7916dc10e9a4f72cbff9c628eba96b3f17c74e31b57d0103c20e7eba309cadf7f65988f21fff8bb9753129055843ca6c7d820f89acbe6f934363df34e
      - key: REFRESH_TOKEN_EXPIRES_IN
        value: 365d
      - key: RAZORPAY_KEY_ID
        value: rzp_test_Rcs02GVJSBCdpe
      - key: RAZORPAY_KEY_SECRET
        value: HOgOaN1NMTivnmRUDL0lgct2
      - key: RAZORPAY_WEBHOOK_SECRET
        value: your_webhook_secret
      - key: EMAIL_FROM
        value: noreply@grmrobotics.com
      - key: EMAIL_HOST
        value: smtp.example.com
      - key: EMAIL_PORT
        value: "587"
      - key: EMAIL_USER
        value: infogrmrobotics@gmail.com
      - key: EMAIL_PASS
        value: djwy qlvu sndn wzpw
      - key: SMTP_HOST
        value: smtp.gmail.com
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USER
        value: infogrmrobotics@gmail.com
      - key: SMTP_PASS
        value: djwy qlvu sndn wzpw
      - key: STORAGE_TYPE
        value: local
      - key: UPLOAD_DIR
        value: ./uploads
      - key: PORT
        value: "10000"
      - key: NODE_ENV
        value: production
      - key: FRONTEND_URL
        value: https://grmrobotics.com
      - key: BCRYPT_ROUNDS
        value: "10"
      - key: RATE_LIMIT_WINDOW_MS
        value: "900000"
      - key: RATE_LIMIT_MAX_REQUESTS
        value: "100"

  # Frontend Service
  - type: web
    name: grm-robotics-frontend
    env: node
    plan: free
    buildCommand: cd frontend && npm install && npm run build
    startCommand: cd frontend && npm start
    envVars:
      - key: NEXT_PUBLIC_API_URL
        value: https://grmrobotics.onrender.com/api
      - key: NEXT_PUBLIC_SITE_URL
        value: https://grmrobotics.com
      - key: NEXT_PUBLIC_RAZORPAY_KEY_ID
        value: rzp_test_Rcs02GVJSBCdpe
      - key: NEXT_PUBLIC_GOOGLE_CLIENT_ID
        value: your-google-client-id.apps.googleusercontent.com
      - key: NEXT_PUBLIC_FACEBOOK_APP_ID
        value: your-facebook-app-id